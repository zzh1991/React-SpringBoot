(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{170:function(ve,j,e){"use strict";var de=e(188),b=e(187),k=e(174),K=e(179),_=e(171),C=e(172),N=e(71),x=e.n(N),Y=e(72),T=e.n(Y),$=e(97),h=e.n($),W=e(73),R=e.n(W),H=e(74),A=e.n(H),J=e(57),M=e.n(J),q=e(182),w=e(184),V=e(45),Q=e.n(V),p=e(0),t=e.n(p),S=e(342),D=e(335),y=e(343),L=e(344),G=e(345),me=e(346),pe=e(60),he=e(37),ee=e.n(he),Ee=e(99),te=e.n(Ee),ye=e(186),ge=e.n(ye),F=e(21),Ce=e(165),I=e.n(Ce),P=e(167),ne,re,ae;function Me(i){var o=Se();return function(){var a=M()(i),r;if(o){var l=M()(this).constructor;r=Reflect.construct(a,arguments,l)}else r=a.apply(this,arguments);return A()(this,r)}}function Se(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}var Oe=function(i){R()(n,i);var o=Me(n);function n(){return x()(this,n),o.apply(this,arguments)}return T()(n,[{key:"render",value:function(){var r=this.props.record;return t.a.createElement(Re,null,t.a.createElement("img",{src:r.imageLarge,alt:r.imageLarge}),t.a.createElement(Be,null,t.a.createElement("h3",null,"\u4E3B\u6F14"),r.casts.split(",").map(function(l){return t.a.createElement(le,{key:l},l)}),t.a.createElement("h3",null,"\u5BFC\u6F14"),r.directors.split(",").map(function(l){return t.a.createElement(le,{key:l},l)}),t.a.createElement("h3",null,"\u7B80\u4ECB"),t.a.createElement("p",null,r.summary),r.countries&&t.a.createElement("h3",null,"\u56FD\u5BB6"),r.countries&&t.a.createElement("p",null,r.countries)))}}]),n}(p.Component),le=P.a.p(ne||(ne=I()([`
  margin-bottom: 4px;
  margin-top: 0;
  padding: 0;
`]))),Re=P.a.div(re||(re=I()([`
  display: flex;
  flex-direction: row;
  margin: 12px;
`]))),Be=P.a.div(ae||(ae=I()([`
  display: flex;
  flex-direction: column;
  margin-left: 20px;
`]))),De=Oe,ie,oe,ue;function Ie(i){var o=Pe();return function(){var a=M()(i),r;if(o){var l=M()(this).constructor;r=Reflect.construct(a,arguments,l)}else r=a.apply(this,arguments);return A()(this,r)}}function Pe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}var xe=function(i){R()(n,i);var o=Ie(n);function n(){return x()(this,n),o.apply(this,arguments)}return T()(n,[{key:"render",value:function(){var r=this.props.movieList;return t.a.createElement(Te,null,r.map(function(l){return t.a.createElement(Ae,null,t.a.createElement(Le,null,t.a.createElement("a",{href:l.url,target:"_blank",rel:"noreferrer"},l.title),t.a.createElement("p",{style:{display:"grid",justifyItems:"end"}},l.rating)),t.a.createElement("img",{src:l.imageLarge,alt:l.imageLarge}))}))}}]),n}(p.Component),Te=P.a.div(ie||(ie=I()([`
  display: grid;
  grid-gap: 1rem;
  grid-template-columns: repeat(auto-fit, minmax(270px, 1fr));
  place-items: center;
`]))),Ae=P.a.div(oe||(oe=I()([`
// display: grid;
// place-items: center;
`]))),Le=P.a.div(ue||(ue=I()([`
display: grid;
grid-template-columns: repeat(auto-fit, minmax(135px, 1fr));
`]))),Fe=xe;function Ue(i,o){var n=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!n){if(Array.isArray(i)||(n=je(i))||o&&i&&typeof i.length=="number"){n&&(i=n);var a=0,r=function(){};return{s:r,n:function(){return a>=i.length?{done:!0}:{done:!1,value:i[a++]}},e:function(v){throw v},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=!0,s=!1,d;return{s:function(){n=n.call(i)},n:function(){var v=n.next();return l=v.done,v},e:function(v){s=!0,d=v},f:function(){try{!l&&n.return!=null&&n.return()}finally{if(s)throw d}}}}function je(i,o){if(i){if(typeof i=="string")return se(i,o);var n=Object.prototype.toString.call(i).slice(8,-1);if(n==="Object"&&i.constructor&&(n=i.constructor.name),n==="Map"||n==="Set")return Array.from(i);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return se(i,o)}}function se(i,o){(o==null||o>i.length)&&(o=i.length);for(var n=0,a=new Array(o);n<o;n++)a[n]=i[n];return a}function Ke(i){var o=We();return function(){var a=M()(i),r;if(o){var l=M()(this).constructor;r=Reflect.construct(a,arguments,l)}else r=a.apply(this,arguments);return A()(this,r)}}function We(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}var ze=Object.defineProperty,be=function(o,n,a){return n in o?ze(o,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[n]=a},g=function(o,n,a){return be(o,Q()(n)!=="symbol"?n+"":n,a),a},Ne=w.a.Search;te.a.extend(ge.a);var Ye=[{text:"\u5267\u60C5",value:"\u5267\u60C5"},{text:"\u52A8\u4F5C",value:"\u52A8\u4F5C"},{text:"\u559C\u5267",value:"\u559C\u5267"},{text:"\u7231\u60C5",value:"\u7231\u60C5"},{text:"\u6218\u4E89",value:"\u6218\u4E89"},{text:"\u7EAA\u5F55\u7247",value:"\u7EAA\u5F55\u7247"},{text:"\u79D1\u5E7B",value:"\u79D1\u5E7B"},{text:"\u52A8\u753B",value:"\u52A8\u753B"}],U="watchedMovieList",X="starMovieList",ce=function(i){R()(n,i);var o=Ke(n);function n(){var a;return x()(this,n),a=o.apply(this,arguments),g(h()(a),"state",{current:1,pageSize:6,watchedMovieSet:Object(F.h)(U),starMovieSet:Object(F.h)(X),searchText:""}),g(h()(a),"onShowSizeChange",function(r,l){a.setState({current:r,pageSize:l})}),g(h()(a),"onChange",function(r){a.setState({current:r})}),g(h()(a),"updateCheck",function(r,l,s){var d=a.props.dispatch;d(F.e.request({id:l,viewed:r})),r?(Object(F.i)(l,s),a.setViewOrStarState(s,l)):(Object(F.a)(l,s),a.setUnviewOrUnstarState(s,l))}),g(h()(a),"setViewOrStarState",function(r,l){var s=a.state,d=s.watchedMovieSet,m=s.starMovieSet;if(r===U){var v=d;v.add(l),a.setState({watchedMovieSet:v})}else{var B=m;B.add(l),a.setState({starMovieSet:B})}}),g(h()(a),"setUnviewOrUnstarState",function(r,l){var s=a.state,d=s.watchedMovieSet,m=s.starMovieSet;if(r===U){var v=d;v.delete(l),a.setState({watchedMovieSet:v})}else{var B=m;B.delete(l),a.setState({starMovieSet:B})}}),g(h()(a),"numberToBoolean",function(r){return r>0}),g(h()(a),"searchMovie",function(r){a.setState({searchText:r})}),g(h()(a),"renderLatestSyncTime",function(){var r=a.props.data;if(r.length===0)return"";var l="",s=Ue(r),d;try{for(s.s();!(d=s.n()).done;){var m=d.value;m.updateTime>l&&(l=m.updateTime)}}catch(v){s.e(v)}finally{s.f()}return"\u4E0A\u6B21\u540C\u6B65\u65F6\u95F4: ".concat(te.a.utc(l).local().format("YYYY-MM-DD HH:mm:ss"))}),a}return T()(n,[{key:"render",value:function(){var r=this,l=this.state,s=l.watchedMovieSet,d=l.starMovieSet,m=l.current,v=l.pageSize,B=[{title:"\u7535\u5F71\u540D\u79F0",key:"name",dataIndex:"title",render:function(c,u){return t.a.createElement("a",{href:u.url,target:"_blank",rel:"noopener noreferrer"},c)},sorter:function(c,u){return c.title.localeCompare(u.title)},width:200},{title:"\u8BC4\u5206",key:"rate",dataIndex:"rating",sorter:{compare:function(c,u){return c.rating-u.rating},multiple:1},width:100},{title:"\u4E0A\u6620\u5E74\u4EFD",key:"year",dataIndex:"movieYear",sorter:{compare:function(c,u){return c.movieYear-u.movieYear},multiple:1},width:150},{title:"\u7C7B\u578B",key:"genres",dataIndex:"genres",width:150,filters:Ye,filterMultiple:!0,onFilter:function(c,u){return u.genres.includes(c)}},{title:"\u5DF2\u770B",key:"viewed",dataIndex:"viewed",render:function(c,u){var E=!1;return u&&u.movieId&&s.has(u.movieId)&&(E=!0),t.a.createElement("span",null,E&&t.a.createElement(C.a,{type:"circle",onClick:function(){r.updateCheck(!E,u.movieId,U)}},t.a.createElement(S.a,null)),!E&&t.a.createElement(C.a,{type:"circle",onClick:function(){r.updateCheck(!E,u.movieId,U)}},t.a.createElement(D.a,null)))},width:100,filters:[{text:"\u5DF2\u770B",value:1},{text:"\u672A\u770B",value:0}],filterMultiple:!1,onFilter:function(c,u){return u.viewed===r.numberToBoolean(c)}},{title:"\u60F3\u770B",key:"star",dataIndex:"star",render:function(c,u){var E=!1;return u&&u.movieId&&d.has(u.movieId)&&(E=!0),t.a.createElement("span",null,E&&t.a.createElement(C.a,{type:"circle",onClick:function(){r.updateCheck(!E,u.movieId,X)}},t.a.createElement(y.a,null)),!E&&t.a.createElement(C.a,{type:"circle",onClick:function(){r.updateCheck(!E,u.movieId,X)}},t.a.createElement(L.a,null)))},width:100,filters:[{text:"\u60F3\u770B",value:1},{text:"\u4E0D\u770B",value:0}],filterMultiple:!1,onFilter:function(c,u){return u.star===r.numberToBoolean(c)}}],z=this.props,Je=z.showSyncButton,we=z.showRefreshButton,Ve=z.syncMovies,Qe=z.refreshMovies,O=this.props.data;if(O!==null){var fe=this.state.searchText;fe!==""&&(O=O.filter(function(f){return f.title.includes(fe)})),O.map(function(f,c){f.key=c})}return s&&O.map(function(f){s.has(f.movieId)&&(f.viewed=!0)}),d&&O.map(function(f){d.has(f.movieId)&&(f.star=!0)}),t.a.createElement("div",null,window.outerWidth>=1e3&&t.a.createElement("div",null,t.a.createElement("div",{style:{marginBottom:16,display:"grid",gridTemplateColumns:"5fr 5fr"}},t.a.createElement("div",{style:{display:"grid"}},t.a.createElement(Ne,{placeholder:"\u7535\u5F71\u641C\u7D22",onSearch:this.searchMovie,style:{width:200}})),Je&&t.a.createElement("div",{style:{display:"grid",justifyItems:"end",alignItems:"center"}},t.a.createElement("div",null,t.a.createElement("span",{style:{marginRight:8}},this.renderLatestSyncTime()),t.a.createElement(K.a,{placement:"top",title:"\u540C\u6B65"},t.a.createElement(C.a,{shape:"circle",icon:t.a.createElement(G.a,null),onClick:Ve})))),we&&t.a.createElement("div",{style:{display:"grid",justifyItems:"end",alignItems:"center"}},t.a.createElement(K.a,{placement:"bottom",title:"reload"},t.a.createElement(C.a,{shape:"circle",icon:t.a.createElement(me.a,null),onClick:Qe})))),t.a.createElement(b.a,{columns:B,dataSource:O,pagination:{current:m,pageSize:v,showSizeChanger:!0,onShowSizeChange:this.onShowSizeChange,pageSizeOptions:["6","8","10","15","20"],showQuickJumper:!0,onChange:this.onChange},expandedRowRender:function(c){return t.a.createElement(De,{record:c})},rowKey:function(c){return c.id}})),window.outerWidth<1e3&&t.a.createElement(Fe,{movieList:O}))}}]),n}(t.a.Component);function $e(){return{}}function He(i){return{dispatch:i}}ce.propTypes={showSyncButton:ee.a.bool,showRefreshButton:ee.a.bool};var Ge=j.a=Object(pe.connect)($e,He)(ce)},340:function(ve,j,e){"use strict";e.r(j);var de=e(180),b=e(181),k=e(71),K=e.n(k),_=e(72),C=e.n(_),N=e(73),x=e.n(N),Y=e(74),T=e.n(Y),$=e(57),h=e.n($),W=e(0),R=e.n(W),H=e(60),A=e(21),J=e(170);function M(p){var t=q();return function(){var D=h()(p),y;if(t){var L=h()(this).constructor;y=Reflect.construct(D,arguments,L)}else y=D.apply(this,arguments);return T()(this,y)}}function q(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(p){return!1}}var w=function(p){x()(S,p);var t=M(S);function S(){return K()(this,S),t.apply(this,arguments)}return C()(S,[{key:"componentDidMount",value:function(){var y=this.props.dispatch;y(A.b.request())}},{key:"render",value:function(){var y=this.props,L=y.data,G=y.loading;return R.a.createElement("div",null,R.a.createElement(b.a,{tip:"Loading...",spinning:G},R.a.createElement(J.a,{data:L})))}}]),S}(W.Component);function V(p){return{data:p.info.allMoviesList.data,loading:p.info.allMoviesList.loading}}function Q(p){return{dispatch:p}}j.default=Object(H.connect)(V,Q)(w)}}]);
