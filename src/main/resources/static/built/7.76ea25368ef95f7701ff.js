(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{170:function(ye,b,e){"use strict";var ge=e(188),H=e(187),ie=e(174),j=e(179),le=e(171),D=e(172),J=e(71),I=e.n(J),V=e(72),A=e.n(V),Q=e(97),y=e.n(Q),G=e(73),L=e.n(G),X=e(74),F=e.n(X),z=e(57),S=e.n(z),oe=e(182),Z=e(184),N=e(45),w=e.n(N),U=e(0),r=e.n(U),_=e(342),Y=e(335),k=e(343),q=e(344),ee=e(345),te=e(346),E=e(60),g=e(37),d=e.n(g),v=e(99),C=e.n(v),O=e(186),ne=e.n(O),K=e(21),Ce=e(165),T=e.n(Ce),x=e(167),ue,se,ce;function Me(l){var o=Se();return function(){var a=S()(l),n;if(o){var i=S()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return F()(this,n)}}function Se(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(l){return!1}}var Oe=function(l){L()(t,l);var o=Me(t);function t(){return I()(this,t),o.apply(this,arguments)}return A()(t,[{key:"render",value:function(){var n=this.props.record;return r.a.createElement(Re,null,r.a.createElement("img",{src:n.imageLarge,alt:n.imageLarge}),r.a.createElement(De,null,r.a.createElement("h3",null,"\u4E3B\u6F14"),n.casts.split(",").map(function(i){return r.a.createElement(fe,{key:i},i)}),r.a.createElement("h3",null,"\u5BFC\u6F14"),n.directors.split(",").map(function(i){return r.a.createElement(fe,{key:i},i)}),r.a.createElement("h3",null,"\u7B80\u4ECB"),r.a.createElement("p",null,n.summary),n.countries&&r.a.createElement("h3",null,"\u56FD\u5BB6"),n.countries&&r.a.createElement("p",null,n.countries)))}}]),t}(U.Component),fe=x.a.p(ue||(ue=T()([`
  margin-bottom: 4px;
  margin-top: 0;
  padding: 0;
`]))),Re=x.a.div(se||(se=T()([`
  display: flex;
  flex-direction: row;
  margin: 12px;
`]))),De=x.a.div(ce||(ce=T()([`
  display: flex;
  flex-direction: column;
  margin-left: 20px;
`]))),Pe=Oe,ve,de,me;function Be(l){var o=Ie();return function(){var a=S()(l),n;if(o){var i=S()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return F()(this,n)}}function Ie(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(l){return!1}}var Le=function(l){L()(t,l);var o=Be(t);function t(){return I()(this,t),o.apply(this,arguments)}return A()(t,[{key:"render",value:function(){var n=this.props.movieList;return r.a.createElement(Te,null,n.map(function(i){return r.a.createElement(xe,null,r.a.createElement(Ae,null,r.a.createElement("a",{href:i.url,target:"_blank",rel:"noreferrer"},i.title),r.a.createElement("p",{style:{display:"grid",justifyItems:"end"}},i.rating)),r.a.createElement("img",{src:i.imageLarge,alt:i.imageLarge}))}))}}]),t}(U.Component),Te=x.a.div(ve||(ve=T()([`
  display: grid;
  grid-gap: 1rem;
  grid-template-columns: repeat(auto-fit, minmax(270px, 1fr));
  place-items: center;
`]))),xe=x.a.div(de||(de=T()([`
// display: grid;
// place-items: center;
`]))),Ae=x.a.div(me||(me=T()([`
display: grid;
grid-template-columns: repeat(auto-fit, minmax(135px, 1fr));
`]))),Fe=Le;function Ue(l,o){var t=typeof Symbol!="undefined"&&l[Symbol.iterator]||l["@@iterator"];if(!t){if(Array.isArray(l)||(t=Ke(l))||o&&l&&typeof l.length=="number"){t&&(l=t);var a=0,n=function(){};return{s:n,n:function(){return a>=l.length?{done:!0}:{done:!1,value:l[a++]}},e:function(m){throw m},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,s=!1,p;return{s:function(){t=t.call(l)},n:function(){var m=t.next();return i=m.done,m},e:function(m){s=!0,p=m},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(s)throw p}}}}function Ke(l,o){if(l){if(typeof l=="string")return pe(l,o);var t=Object.prototype.toString.call(l).slice(8,-1);if(t==="Object"&&l.constructor&&(t=l.constructor.name),t==="Map"||t==="Set")return Array.from(l);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return pe(l,o)}}function pe(l,o){(o==null||o>l.length)&&(o=l.length);for(var t=0,a=new Array(o);t<o;t++)a[t]=l[t];return a}function We(l){var o=be();return function(){var a=S()(l),n;if(o){var i=S()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return F()(this,n)}}function be(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(l){return!1}}var je=Object.defineProperty,ze=function(o,t,a){return t in o?je(o,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[t]=a},R=function(o,t,a){return ze(o,w()(t)!=="symbol"?t+"":t,a),a},Ne=Z.a.Search;C.a.extend(ne.a);var Ye=[{text:"\u5267\u60C5",value:"\u5267\u60C5"},{text:"\u52A8\u4F5C",value:"\u52A8\u4F5C"},{text:"\u559C\u5267",value:"\u559C\u5267"},{text:"\u7231\u60C5",value:"\u7231\u60C5"},{text:"\u6218\u4E89",value:"\u6218\u4E89"},{text:"\u7EAA\u5F55\u7247",value:"\u7EAA\u5F55\u7247"},{text:"\u79D1\u5E7B",value:"\u79D1\u5E7B"},{text:"\u52A8\u753B",value:"\u52A8\u753B"}],W="watchedMovieList",re="starMovieList",he=function(l){L()(t,l);var o=We(t);function t(){var a;return I()(this,t),a=o.apply(this,arguments),R(y()(a),"state",{current:1,pageSize:6,watchedMovieSet:Object(K.h)(W),starMovieSet:Object(K.h)(re),searchText:""}),R(y()(a),"onShowSizeChange",function(n,i){a.setState({current:n,pageSize:i})}),R(y()(a),"onChange",function(n){a.setState({current:n})}),R(y()(a),"updateCheck",function(n,i,s){var p=a.props.dispatch;p(K.e.request({id:i,viewed:n})),n?(Object(K.i)(i,s),a.setViewOrStarState(s,i)):(Object(K.a)(i,s),a.setUnviewOrUnstarState(s,i))}),R(y()(a),"setViewOrStarState",function(n,i){var s=a.state,p=s.watchedMovieSet,h=s.starMovieSet;if(n===W){var m=p;m.add(i),a.setState({watchedMovieSet:m})}else{var B=h;B.add(i),a.setState({starMovieSet:B})}}),R(y()(a),"setUnviewOrUnstarState",function(n,i){var s=a.state,p=s.watchedMovieSet,h=s.starMovieSet;if(n===W){var m=p;m.delete(i),a.setState({watchedMovieSet:m})}else{var B=h;B.delete(i),a.setState({starMovieSet:B})}}),R(y()(a),"numberToBoolean",function(n){return n>0}),R(y()(a),"searchMovie",function(n){a.setState({searchText:n})}),R(y()(a),"renderLatestSyncTime",function(){var n=a.props.data;if(n.length===0)return"";var i="",s=Ue(n),p;try{for(s.s();!(p=s.n()).done;){var h=p.value;h.updateTime>i&&(i=h.updateTime)}}catch(m){s.e(m)}finally{s.f()}return"\u4E0A\u6B21\u540C\u6B65\u65F6\u95F4: ".concat(C.a.utc(i).local().format("YYYY-MM-DD HH:mm:ss"))}),a}return A()(t,[{key:"render",value:function(){var n=this,i=this.state,s=i.watchedMovieSet,p=i.starMovieSet,h=i.current,m=i.pageSize,B=[{title:"\u7535\u5F71\u540D\u79F0",key:"name",dataIndex:"title",render:function(c,u){return r.a.createElement("a",{href:u.url,target:"_blank",rel:"noopener noreferrer"},c)},sorter:function(c,u){return c.title.localeCompare(u.title)},width:200},{title:"\u8BC4\u5206",key:"rate",dataIndex:"rating",sorter:{compare:function(c,u){return c.rating-u.rating},multiple:1},width:100},{title:"\u4E0A\u6620\u5E74\u4EFD",key:"year",dataIndex:"movieYear",sorter:{compare:function(c,u){return c.movieYear-u.movieYear},multiple:1},width:150},{title:"\u7C7B\u578B",key:"genres",dataIndex:"genres",width:150,filters:Ye,filterMultiple:!0,onFilter:function(c,u){return u.genres.includes(c)}},{title:"\u5DF2\u770B",key:"viewed",dataIndex:"viewed",render:function(c,u){var M=!1;return u&&u.movieId&&s.has(u.movieId)&&(M=!0),r.a.createElement("span",null,M&&r.a.createElement(D.a,{type:"circle",onClick:function(){n.updateCheck(!M,u.movieId,W)}},r.a.createElement(_.a,null)),!M&&r.a.createElement(D.a,{type:"circle",onClick:function(){n.updateCheck(!M,u.movieId,W)}},r.a.createElement(Y.a,null)))},width:100,filters:[{text:"\u5DF2\u770B",value:1},{text:"\u672A\u770B",value:0}],filterMultiple:!1,onFilter:function(c,u){return u.viewed===n.numberToBoolean(c)}},{title:"\u60F3\u770B",key:"star",dataIndex:"star",render:function(c,u){var M=!1;return u&&u.movieId&&p.has(u.movieId)&&(M=!0),r.a.createElement("span",null,M&&r.a.createElement(D.a,{type:"circle",onClick:function(){n.updateCheck(!M,u.movieId,re)}},r.a.createElement(k.a,null)),!M&&r.a.createElement(D.a,{type:"circle",onClick:function(){n.updateCheck(!M,u.movieId,re)}},r.a.createElement(q.a,null)))},width:100,filters:[{text:"\u60F3\u770B",value:1},{text:"\u4E0D\u770B",value:0}],filterMultiple:!1,onFilter:function(c,u){return u.star===n.numberToBoolean(c)}}],$=this.props,Je=$.showSyncButton,Ve=$.showRefreshButton,Qe=$.syncMovies,Ge=$.refreshMovies,P=this.props.data;if(P!==null){var Ee=this.state.searchText;Ee!==""&&(P=P.filter(function(f){return f.title.includes(Ee)})),P.map(function(f,c){f.key=c})}return s&&P.map(function(f){s.has(f.movieId)&&(f.viewed=!0)}),p&&P.map(function(f){p.has(f.movieId)&&(f.star=!0)}),r.a.createElement("div",null,window.outerWidth>=1e3&&r.a.createElement("div",null,r.a.createElement("div",{style:{marginBottom:16,display:"grid",gridTemplateColumns:"5fr 5fr"}},r.a.createElement("div",{style:{display:"grid"}},r.a.createElement(Ne,{placeholder:"\u7535\u5F71\u641C\u7D22",onSearch:this.searchMovie,style:{width:200}})),Je&&r.a.createElement("div",{style:{display:"grid",justifyItems:"end",alignItems:"center"}},r.a.createElement("div",null,r.a.createElement("span",{style:{marginRight:8}},this.renderLatestSyncTime()),r.a.createElement(j.a,{placement:"top",title:"\u540C\u6B65"},r.a.createElement(D.a,{shape:"circle",icon:r.a.createElement(ee.a,null),onClick:Qe})))),Ve&&r.a.createElement("div",{style:{display:"grid",justifyItems:"end",alignItems:"center"}},r.a.createElement(j.a,{placement:"bottom",title:"reload"},r.a.createElement(D.a,{shape:"circle",icon:r.a.createElement(te.a,null),onClick:Ge})))),r.a.createElement(H.a,{columns:B,dataSource:P,pagination:{current:h,pageSize:m,showSizeChanger:!0,onShowSizeChange:this.onShowSizeChange,pageSizeOptions:["6","8","10","15","20"],showQuickJumper:!0,onChange:this.onChange},expandedRowRender:function(c){return r.a.createElement(Pe,{record:c})},rowKey:function(c){return c.id}})),window.outerWidth<1e3&&r.a.createElement(Fe,{movieList:P}))}}]),t}(r.a.Component);function $e(){return{}}function He(l){return{dispatch:l}}he.propTypes={showSyncButton:d.a.bool,showRefreshButton:d.a.bool};var Xe=b.a=Object(E.connect)($e,He)(he)},339:function(ye,b,e){"use strict";e.r(b);var ge=e(180),H=e(181),ie=e(71),j=e.n(ie),le=e(72),D=e.n(le),J=e(97),I=e.n(J),V=e(73),A=e.n(V),Q=e(74),y=e.n(Q),G=e(57),L=e.n(G),X=e(45),F=e.n(X),z=e(0),S=e.n(z),oe=e(60),Z=e(170),N=e(21);function w(E){var g=U();return function(){var v=L()(E),C;if(g){var O=L()(this).constructor;C=Reflect.construct(v,arguments,O)}else C=v.apply(this,arguments);return y()(this,C)}}function U(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(E){return!1}}var r=Object.defineProperty,_=function(g,d,v){return d in g?r(g,d,{enumerable:!0,configurable:!0,writable:!0,value:v}):g[d]=v},Y=function(g,d,v){return _(g,F()(d)!=="symbol"?d+"":d,v),v},k="starMovieList",q=function(E){A()(d,E);var g=w(d);function d(){var v;return j()(this,d),v=g.apply(this,arguments),Y(I()(v),"getStarMovieList",function(){var C=v.props.dispatch,O=Object(N.h)(k);O=O===null?[]:Array.from(O),C(N.f.request(O))}),Y(I()(v),"onRefresh",function(){v.getStarMovieList()}),v}return D()(d,[{key:"componentDidMount",value:function(){this.getStarMovieList()}},{key:"render",value:function(){var C=this.props,O=C.data,ne=C.loading;return S.a.createElement("div",null,S.a.createElement(H.a,{tip:"Loading...",spinning:ne},S.a.createElement(Z.a,{data:O,refreshMovies:this.onRefresh})))}}]),d}(z.Component);function ee(E){return{data:E.info.movieStarList.data,loading:E.info.movieStarList.loading}}function te(E){return{dispatch:E}}b.default=Object(oe.connect)(ee,te)(q)}}]);
